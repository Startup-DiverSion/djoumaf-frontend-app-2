var m=Object.defineProperty;var I=(i,a,e)=>a in i?m(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e;var u=(i,a,e)=>I(i,typeof a!="symbol"?a+"":a,e);import{H as y,U as p,al as M,G as R,v as d,aa as h,R as v}from"./index-D5ohQRTx.js";class _{constructor(){u(this,"candidacy_see_profile",async(a,e,t,w)=>{try{const{data:s}=await y.post(p.PROFILE_CANDIDACY_SEE,{id:a});if(s)return{data:s,error:null}}catch(s){if(s.response)return{data:null,error:[s.response.data]}}});u(this,"candidacy_state",async(a,e)=>{try{const{data:t}=await y.post(p.PROFILE_CANDIDACY_STATE,{id:a,state:e});if(t)return{data:t,error:null}}catch(t){if(t.response)return{data:null,error:[t.response.data]}}})}async find(){try{let a=[];const{data:e}=await y.get(p.TALK_MAIL_INDEX);if(e)return a=e.talk_mails,a.forEach(t=>{t.created_at=M(t.created_at).fromNow()}),{data:a,error:null}}catch(a){if(a.response)return{data:null,error:[a.response.data]}}}}const N=()=>{const i=R({loading:!1}),a=d([]),e=d([]),t=d(),w=d(),s=d(),l=async(n,o)=>{const r=await n;if(r!=null&&r.error)return i.loading=!1,e.value=r==null?void 0:r.error[0];o(r)},A=async()=>await l(new _().find(),n=>{console.log(a.value),a.value=n==null?void 0:n.data.reverse()}),E=async(n,o,r,f)=>{if(f)window.open("/"+o,"_blank");else return await l(new _().candidacy_see_profile(n,o,E,r),k=>{r.forEach(c=>{c.id===n&&(c.candidacy_see_profile=!0)}),window.open("/"+o,"_blank")})};return{talkMails:A,talkMailsData:a,envConfig:h,candidacy_see_profile:E,candidacy_state_defined:async(n,o,r,f)=>{if(!f)return await l(new _().candidacy_state(n,o),k=>{r.forEach(c=>{c.id===n&&(c.candidacy_state=o,o?new v().custom("FÃ©licitation","Vous venez de mettre ce profile en favorie.","bio","green-400"):o===!1&&new v().custom("Oups! Rejecter","Ce profile ne vous interesse pas.","reject","red-400"))})})},candidacySelected:t,candidacyReject:w,candidacyNoRead:s}};export{N as u};
