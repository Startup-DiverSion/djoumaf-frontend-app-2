const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthLayout-BzcYM-Ax.js","assets/index-D5ohQRTx.js","assets/index-Bflj8BPZ.css","assets/redirectLinkAuthCompoment-CPL7Znx5.js"])))=>i.map(i=>d[i]);
import{d as S,G as _,ae as A,o as I,v as R,K as M,aP as V,e as g,P as L,N as b,al as h,Q as k,_ as v,f as P,g as N,w,r as p,h as B,k as s,i as m,Z as O,l as z,t as T,n as U}from"./index-D5ohQRTx.js";import $ from"./btnAuthCompoment-CBf-pB0q.js";import{u as x}from"./auth.composition-DQgKC60C.js";const K=g(()=>v(()=>import("./AuthLayout-BzcYM-Ax.js"),__vite__mapDeps([0,1,2]))),q=g(()=>v(()=>import("./index-D5ohQRTx.js").then(e=>e.bb),__vite__mapDeps([1,2]))),G=g(()=>v(()=>import("./redirectLinkAuthCompoment-CPL7Znx5.js"),__vite__mapDeps([3,1,2]))),Q=S({name:"SignIn",components:{AuthLayout:K,OnlyInput:q,BtnAuthCompoment:$,RedirectLinkAuthCompoment:G},props:{},setup(){const e=_({title:"Réinitialisez maintenant votre mot de passe!",sub:"Réinitialisez en toute sécurité votre mot de passe, avec le code de 5 chiffres envoyer par mail."}),{state:n,inputDataPassword:D,inputDataOnlyEmail:y,SignChangePassword:C,isError:E,SignVerifyEmail:u}=x(),a=new L,c=new k,f=b();A(async()=>{await a.get("jEmail")||f.replace({name:"SignChangeEmail"})});const t=async()=>{if(o.value===null){const i=await a.get("jEmail");y.email=c.qDecrypted(i),u().then(()=>{a.set("jDateBeforeToRelaunchMail",h().utc().add(5,"minutes")),a.get("jDateBeforeToRelaunchMail").then(d=>{o.value=d})}).catch(d=>{console.log(d)})}else console.log("No")};I(()=>{a.get("jDateBeforeToRelaunchMail").then(i=>{o.value=i})});const l=R({sec:0,min:0}),o=R(null),j=M(()=>(o.value!==null&&setInterval(async()=>{const i=h(o.value),d=h().utc();let r=i.diff(d);r=Math.floor(r/1e3),l.value.sec=r%60,r=Math.floor((r-l.value.sec)/60),l.value.min=r%60,l.value.min<0&&l.value.sec<0&&(o.value=null,await a.remove("jDateBeforeToRelaunchMail"))},1e3),l.value));return V(()=>{}),{headerData:e,inputData:D,SignChangePassword:C,state:n,isError:E,SendEmailAgin:t,jDateBeforeToRelaunchMail:j,isTimeRelaunchExist:o}}}),Z={class:"flex flex-col gap-2"},F={class:"flex flex-col mb-2 gap-2 rounded-md"},H={class:"flex flex-col gap-1 placeholder:text-center"},J={key:0};function W(e,n,D,y,C,E){const u=p("OnlyInput"),a=p("BtnAuthCompoment"),c=p("RedirectLinkAuthCompoment"),f=p("AuthLayout");return B(),N(f,{head:e.headerData,authConnexion:e.SignChangePassword},{default:w(()=>[s("div",Z,[s("div",F,[n[5]||(n[5]=s("div",{class:"flex justify-between items-center"},[s("span",{class:"text-xl font-light"},"Code de réinitialisation")],-1)),s("div",H,[m(u,{placeholder:"00000",type:"number",name:"code",modelValue:e.inputData.code,"onUpdate:modelValue":n[0]||(n[0]=t=>e.inputData.code=t.target.value),errorInput:e.isError},null,8,["modelValue","errorInput"]),s("div",{onClick:n[1]||(n[1]=(...t)=>e.SendEmailAgin&&e.SendEmailAgin(...t)),class:O(["text-sm font-sans font-bold text-blue-500/80 underline cursor-pointer flex justify-end px-1",e.isTimeRelaunchExist?"cursor-text":""])},[n[4]||(n[4]=s("span",{class:"pr-1"},"Renvoyer un code ",-1)),e.isTimeRelaunchExist!==null?(B(),z("span",J,",dans "+T(e.jDateBeforeToRelaunchMail.min.toString().length===1?"0"+e.jDateBeforeToRelaunchMail.min:e.jDateBeforeToRelaunchMail.min)+":"+T(e.jDateBeforeToRelaunchMail.sec.toString().length===1?"0"+e.jDateBeforeToRelaunchMail.sec:e.jDateBeforeToRelaunchMail.sec),1)):U("",!0)],2)])]),m(u,{placeholder:"Nouveau mot de passe",type:"password",name:"old_password",modelValue:e.inputData.old_password,"onUpdate:modelValue":n[2]||(n[2]=t=>e.inputData.old_password=t.target.value),errorInput:e.isError},null,8,["modelValue","errorInput"]),m(u,{placeholder:"Comfirmez le mot de passe",type:"password",name:"new_password",modelValue:e.inputData.new_password,"onUpdate:modelValue":n[3]||(n[3]=t=>e.inputData.new_password=t.target.value),errorInput:e.isError},null,8,["modelValue","errorInput"])]),m(a,{label:"Suivant",isLoading:e.state.loading},null,8,["isLoading"])]),redirect:w(()=>[m(c,{routeName:"SignChangeEmail",quiz:"Pas le bon Mail ?","route-label":"Changez-le",routeLink:"SignChangeEmail"})]),_:1},8,["head","authConnexion"])}const ne=P(Q,[["render",W]]);export{ne as default};
